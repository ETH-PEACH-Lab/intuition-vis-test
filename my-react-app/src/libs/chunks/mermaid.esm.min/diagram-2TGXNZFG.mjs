import{a as q}from"./chunk-FI6ZHBMQ.mjs";import{a as L}from"./chunk-PESYNNQV.mjs";import"./chunk-WUM4NJK5.mjs";import"./chunk-CIOHJ5F5.mjs";import"./chunk-EAJACKDH.mjs";import"./chunk-XYHAFWDE.mjs";import"./chunk-SP6X4G6O.mjs";import{a as T}from"./chunk-BEH7KTBC.mjs";import"./chunk-VMDNBU76.mjs";import"./chunk-LEAL3RNQ.mjs";import{l as G}from"./chunk-JT6TYY6Y.mjs";import"./chunk-EZ6AQD5Z.mjs";import{Fa as k,Ia as A,La as E,Ma as P,Na as j,Oa as B,Pa as M,Qa as $,Ra as R,b as h,pa as C}from"./chunk-3RIG7DRU.mjs";import"./chunk-RS46GSJM.mjs";import{a as r}from"./chunk-J73WXDYM.mjs";var z=[],v=[...z],O=C.visslides,W=r(()=>G({...O,...k().visslides}),"getConfig"),U=r(()=>v,"getPages"),X=r(t=>{v.push(t)},"addPage"),H=r(()=>{E(),v=[...z]},"clear"),w={getPages:U,addPage:X,getConfig:W,clear:H,setAccTitle:P,getAccTitle:j,setDiagramTitle:$,getDiagramTitle:R,getAccDescription:M,setAccDescription:B};var J=r(t=>{q(t,w);for(let e of t.pages){let p=e.subDiagrams.map(l=>"elements"in l?{elements:l.elements.map(a=>({value:a.value,arrow:a.arrow?!0:void 0,context:a.context,color:a.color})),showIndex:l.showIndex?!0:void 0}:{rows:l.rows.map(a=>({elements:a.elements.map(o=>({value:o.value,color:o.color}))}))});w.addPage({subDiagrams:p})}},"populate"),F={parse:async t=>{let e=await L("visslides",t);h.debug(e),J(e)}};var _=r((t,e,p,l)=>{let a=t.append("g").attr("transform",`translate(0, ${p})`);e.elements.forEach((o,m)=>{K(a,o,m,l,e.showIndex||!1)})},"drawArrayDiagram"),K=r((t,e,p,{elementColor:l,borderColor:a,borderWidth:o,labelColor:m,labelFontSize:g},d)=>{let s=t.append("g"),i=p*50+50,n=50,x=Q(e.color);if(e.arrow){let b=n-40,S=n-10;s.append("line").attr("x1",i+20).attr("y1",b).attr("x2",i+20).attr("y2",S).attr("stroke","black").attr("marker-end","url(#arrowhead)"),e.context&&s.append("text").attr("x",i+20).attr("y",b-10).attr("fill",m).attr("font-size",g).attr("dominant-baseline","hanging").attr("text-anchor","middle").attr("class","arrowContext").text(e.context)}s.append("rect").attr("x",i).attr("y",n).attr("width",40).attr("height",40).style("fill",x).attr("stroke",a).attr("stroke-width",o).attr("class","arrayElement"),s.append("text").attr("x",i+20).attr("y",n+20).attr("fill",m).attr("font-size",g).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","elementLabel").text(e.value),d&&s.append("text").attr("x",i+20).attr("y",n+60).attr("fill",m).attr("font-size",25).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","indexLabel").text(p)},"drawElement"),Q=r(t=>{switch(t){case"blue":return"rgba(0, 0, 255, 0.3)";case"green":return"rgba(0, 255, 0, 0.3)";case"red":return"rgba(255, 0, 0, 0.3)";default:return"none"}},"getColor");var I=r((t,e,p,l)=>{let a=t.append("g").attr("transform",`translate(0, ${p})`);e.rows.forEach((o,m)=>{o.elements.forEach((g,d)=>{Z(a,g,m,d,l)})})},"drawMatrixDiagram"),Z=r((t,e,p,l,{borderColor:a,borderWidth:o,labelColor:m,labelFontSize:g})=>{let d=t.append("g"),s=l*50+50,i=p*50+50,n=tt(e.color);d.append("rect").attr("x",s).attr("y",i).attr("width",40).attr("height",40).style("fill",n).attr("stroke",a).attr("stroke-width",o).attr("class","matrixElement"),d.append("text").attr("x",s+20).attr("y",i+20).attr("fill",m).attr("font-size",g).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","elementLabel").text(e.value.toString())},"drawElement"),tt=r(t=>{switch(t){case"blue":return"rgba(0, 0, 255, 0.3)";case"green":return"rgba(0, 255, 0, 0.3)";case"red":return"rgba(255, 0, 0, 0.3)";default:return"none"}},"getColor");var rt=r((t,e,p,l)=>{let a=l.db,o=a.getConfig(),m=a.getPages(),g=a.getDiagramTitle(),d=800,s=600,i=T(e),n=0,x=r(c=>{i.selectAll("g.page").attr("display","none"),i.select(`#page${c}`).attr("display","inline"),i.select("#prevButton").attr("fill",c>0?"#007bff":"#c0c0c0"),i.select("#nextButton").attr("fill",c<m.length-1?"#007bff":"#c0c0c0")},"renderPage"),b=r((c,y)=>{let D=c.append("g").attr("class","navigation-buttons"),u=D.append("g").attr("id","prevButtonGroup").attr("cursor","pointer");u.append("rect").attr("id","prevButton").attr("x",10).attr("y",d-40).attr("width",60).attr("height",30).attr("fill","#c0c0c0"),u.append("text").text("Prev").attr("x",40).attr("y",d-20).attr("fill","white").attr("text-anchor","middle").attr("alignment-baseline","middle");let f=D.append("g").attr("id","nextButtonGroup").attr("cursor","pointer");f.append("rect").attr("id","nextButton").attr("x",s-70).attr("y",d-40).attr("width",60).attr("height",30).attr("fill","#007bff"),f.append("text").text("Next").attr("x",s-40).attr("y",d-20).attr("fill","white").attr("text-anchor","middle").attr("alignment-baseline","middle"),u.node()?.addEventListener("click",()=>{n>0&&(n-=1,x(n))}),f.node()?.addEventListener("click",()=>{n<y-1&&(n+=1,x(n))})},"addNavigationButtons"),S=r((c,y,D)=>{let u=c.append("g").attr("id",`page${D}`).attr("class","page").attr("display",D===0?"inline":"none");g&&u.append("text").text(g).attr("x",s/2).attr("y",25).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","pageTitle");let f=50;for(let V of y.subDiagrams)V.elements?(_(u,V,f,o),f+=100):(I(u,V,f,o),f+=200)},"drawPage");i.attr("viewBox",`0 0 ${s} ${d}`),A(i,d,s,o.useMaxWidth),m.forEach((c,y)=>{S(i,c,y)}),b(i,m.length),x(n)},"draw"),N={draw:rt};var Y=r((t={})=>(h.debug({options:t}),`
    .element {
      font-size: ${t.array?.elementFontSize??"10px"};
      fill: ${t.array?.valueColor??"black"};
    }
    .element.index {
      fill: ${t.array?.indexColor??"black"};
    }
    .element {
      stroke: ${t.array?.elementStrokeColor??"black"};
      stroke-width: ${t.array?.elementStrokeWidth??"1"};
      fill: ${t.array?.elementFillColor??"#efefef"};
    }
  `),"styles");var jt={parser:F,db:w,renderer:N,styles:Y};export{jt as diagram};
