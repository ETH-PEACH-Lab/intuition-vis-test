import{a as R}from"./chunk-FI6ZHBMQ.mjs";import{a as z}from"./chunk-CBKUYFM2.mjs";import"./chunk-QACL6645.mjs";import"./chunk-NNCHJPYV.mjs";import"./chunk-6PCQ7JZ7.mjs";import"./chunk-PC2RSJ4C.mjs";import"./chunk-QLLLEZ2Q.mjs";import"./chunk-IVOKOJOY.mjs";import{a as L}from"./chunk-GCAN3TJ3.mjs";import"./chunk-VMDNBU76.mjs";import"./chunk-LEAL3RNQ.mjs";import{l as w}from"./chunk-EYGBHCO6.mjs";import"./chunk-EZ6AQD5Z.mjs";import{Fa as C,Ia as v,La as k,Ma as E,Na as S,Oa as $,Pa as j,Qa as G,Ra as T,b as l,pa as h}from"./chunk-PZJP3F4K.mjs";import"./chunk-RS46GSJM.mjs";import{a as e}from"./chunk-J73WXDYM.mjs";var _={elements:[]},A=structuredClone(_),V=h.array,q=e(()=>w({...V,...C().array}),"getConfig"),M=e(()=>A.elements,"getArray"),O=e(t=>{A.elements.push(t)},"addElement"),P=e(()=>{k(),A=structuredClone(_)},"clear"),d={addElement:O,getArray:M,getConfig:q,clear:P,setAccTitle:E,getAccTitle:S,setDiagramTitle:G,getDiagramTitle:T,getAccDescription:j,setAccDescription:$};var H=e(t=>{R(t,d);for(let r of t.elements){let a=t.elements.indexOf(r);if(a<0)throw new Error(`Array index ${a} is invalid. Index must be non-negative.`);l.debug(`Array element at index ${a} with value ${r.value}`),d.addElement({index:a,value:r.value,arrow:!!r.arrow,context:r.context||void 0,color:r.color||"none"})}},"populate"),F={parse:async t=>{let r=await z("array",t);l.debug(r),H(r)}};var N="showindex",U=e((t,r,a,y)=>{let c=y.db,p=c.getConfig(),{elementColor:f,borderColor:x,borderWidth:b,labelColor:m,labelFontSize:o}=p,n=c.getArray(),u=y.text.toLowerCase().includes(N),i=c.getDiagramTitle(),g=300,D=800,s=L(r);s.attr("viewbox",`0 0 ${D} ${g}`),v(s,g,D,p.useMaxWidth),J(s);for(let[Y,I]of n.entries())X(s,I,Y,p,u);i&&s.append("text").text(i).attr("x",D/2).attr("y",25).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","arrayTitle")},"draw"),X=e((t,r,a,{elementColor:y,borderColor:c,borderWidth:p,labelColor:f,labelFontSize:x},b)=>{let m=t.append("g"),o=a*50+50,n=100,u=e(i=>{switch(i){case"blue":return"rgba(0, 0, 255, 0.3)";case"red":return"rgba(255, 0, 0, 0.3)";case"green":return"rgba(0, 255, 0, 0.3)";default:return"none"}},"getColor");if(r.arrow){let i=n-40,g=n-10;m.append("line").attr("x1",o+20).attr("y1",i).attr("x2",o+20).attr("y2",g).attr("stroke","black").attr("marker-end","url(#arrowhead)"),r.context&&m.append("text").attr("x",o+20).attr("y",i-10).attr("fill",f).attr("font-size",x).attr("dominant-baseline","hanging").attr("text-anchor","middle").attr("class","arrowContext").text(r.context)}m.append("rect").attr("x",o).attr("y",n).attr("width",40).attr("height",40).style("fill",u(r.color?r.color:"none")).attr("stroke","#69b3a2").attr("stroke-width","3px").attr("class","arrayElement"),m.append("text").attr("x",o+20).attr("y",n+20).attr("fill",f).attr("font-size",x).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","elementLabel").text(r.value),b&&m.append("text").attr("x",o+20).attr("y",n+60).attr("fill",f).attr("font-size",25).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","indexLabel").text(a)},"drawElement"),J=e(t=>{t.append("defs").append("marker").attr("id","arrowhead").attr("viewBox","0 0 10 10").attr("refX","5").attr("refY","5").attr("markerWidth","6").attr("markerHeight","6").attr("orient","auto-start-reverse").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("fill","black")},"defineArrowhead"),W={draw:U};var B=e((t={})=>(l.debug({options:t}),`
    .element {
      font-size: ${t.array?.elementFontSize??"10px"};
      fill: ${t.array?.valueColor??"black"};
    }
    .element.index {
      fill: ${t.array?.indexColor??"black"};
    }
    .element {
      stroke: ${t.array?.elementStrokeColor??"black"};
      stroke-width: ${t.array?.elementStrokeWidth??"1"};
      fill: ${t.array?.elementFillColor??"#efefef"};
    }
  `),"styles");var bt={parser:F,db:d,renderer:W,styles:B};export{bt as diagram};
