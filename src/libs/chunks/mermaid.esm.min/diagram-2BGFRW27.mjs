import{a as H}from"./chunk-FI6ZHBMQ.mjs";import{a as R}from"./chunk-LSYTTYOM.mjs";import"./chunk-QNODZV7Q.mjs";import"./chunk-VYTLUDP2.mjs";import"./chunk-BSEW2AJO.mjs";import"./chunk-EFBUICDX.mjs";import"./chunk-Q7DGOWVW.mjs";import"./chunk-VXYEL6QL.mjs";import{a as W}from"./chunk-GCAN3TJ3.mjs";import"./chunk-VMDNBU76.mjs";import"./chunk-LEAL3RNQ.mjs";import{l as z}from"./chunk-EYGBHCO6.mjs";import"./chunk-EZ6AQD5Z.mjs";import{Fa as $,Ia as Y,La as A,Ma as M,Na as _,Oa as N,Pa as j,Qa as T,Ra as q,b as C,h as D,pa as X}from"./chunk-PZJP3F4K.mjs";import"./chunk-RS46GSJM.mjs";import{a as p}from"./chunk-J73WXDYM.mjs";var O=[],B=[...O],ot=X.visual,it=p(()=>z({...ot,...$().visual}),"getConfig"),lt=p(()=>B,"getPages"),st=p(e=>{B.push(e)},"addPage"),dt=p(()=>{A(),B=[...O]},"clear"),E={getPages:lt,addPage:st,getConfig:it,clear:dt,setAccTitle:M,getAccTitle:_,setDiagramTitle:T,getDiagramTitle:q,getAccDescription:j,setAccDescription:N};var ct=p(e=>{H(e,E);for(let t of e.pages){let i=t.subDiagrams.map(a=>{switch(a.diagramType){case"array":return{type:"array",orientation:a.orientation,title:a.title,showIndex:a.showIndex,label:a.label,elements:a.elements.map(r=>({value:r.value,color:r.color,arrow:r.arrowLabel!==void 0&&r.arrowLabel!==null,arrowLabel:r.arrowLabel}))};case"matrix":return{type:"matrix",title:a.title,rows:a.rows.map(r=>({elements:r.elements.map(n=>({value:n.value,color:n.color,arrow:n.arrowLabel!==void 0&&n.arrowLabel!==null,arrowLabel:n.arrowLabel}))})),showIndex:a.showIndex,label:a.label};case"stack":return{type:"stack",orientation:a.orientation,title:a.title,showIndex:a.showIndex,label:a.label,size:a.size,elements:a.elements.map(r=>({value:r.value,color:r.color,arrow:r.arrowLabel!==void 0&&r.arrowLabel!==null,arrowLabel:r.arrowLabel}))};case"tree":return{type:"tree",title:a.title,label:a.label,elements:a.elements.map(r=>({nodeId:r.nodeId,left:r.left=="None"?void 0:r.left,right:r.right=="None"?void 0:r.right,value:r.value,color:r.color,arrow:r.arrowLabel!==void 0&&r.arrowLabel!==null,arrowLabel:r.arrowLabel}))};case"graph":return{type:"graph",title:a.title,label:a.label,elements:a.elements.map(r=>{if(r.$type=="NodeDefinition")return{type:"node",nodeId:r.nodeId,value:r.value,color:r.color,arrow:r.arrowLabel!==void 0&&r.arrowLabel!==null,arrowLabel:r.arrowLabel,hidden:(r.hidden||"").toLowerCase()=="true"};if(r.$type=="EdgeDefinition")return{type:"edge",start:r.start,end:r.end,value:r.value,color:r.color};throw new Error("Unknown graph element type")})};case"linkedList":return{type:"linkedList",title:a.title,label:a.label,elements:a.elements.map(r=>({value:r.value,color:r.color,arrow:!!r.arrowLabel,arrowLabel:r.arrowLabel}))};case"text":return{type:"text",title:a.title,elements:a.elements.map(r=>r.value)};default:throw new Error(`Unknown diagram type: ${a.diagramType}`)}});E.addPage({subDiagrams:i})}},"populate"),U={parse:async e=>{let t=await R("visual",e);C.debug(t),ct(t)}};var h=p((e,t=.6)=>{if(pt(e))return e||"null";let i={black:"#000000",white:"#FFFFFF",red:"#FF0000",green:"#008000",blue:"#0000FF",yellow:"#FFFF00",cyan:"#00FFFF",magenta:"#FF00FF",gray:"#808080",grey:"#808080",maroon:"#800000",olive:"#808000",purple:"#800080",teal:"#008080",navy:"#000080",orange:"#FFA500",pink:"#FFC0CB",brown:"#A52A2A",aqua:"#00FFFF",lime:"#00FF00",gold:"#FFD700",silver:"#C0C0C0",beige:"#F5F5DC",coral:"#FF7F50",chocolate:"#D2691E",crimson:"#DC143C",indigo:"#4B0082",khaki:"#F0E68C",lavender:"#E6E6FA",orchid:"#DA70D6",plum:"#DDA0DD",salmon:"#FA8072",sienna:"#A0522D",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",azure:"#F0FFFF",ivory:"#FFFFF0",mintcream:"#F5FFFA",snow:"#FFFAFA",goldenrod:"#DAA520",tomato:"#FF6347",slateblue:"#6A5ACD",darkgreen:"#006400",darkblue:"#00008B",darkred:"#8B0000",darkorange:"#FF8C00",darkviolet:"#9400D3",darkkhaki:"#BDB76B",lightblue:"#ADD8E6",lightgreen:"#90EE90",lightcoral:"#F08080",lightgray:"#D3D3D3",lightgrey:"#D3D3D3"},a=e?e.toLowerCase():"";if(a in i){let r=i[a];return mt(r,t)}else return"white"},"getColor");function pt(e){return e?/^#([\dA-Fa-f]{3}){1,2}$/.test(e):!1}p(pt,"isValidHexColor");var mt=p((e,t)=>{e=e.replace(/^#/,"");let i=parseInt(e.slice(0,2),16),a=parseInt(e.slice(2,4),16),r=parseInt(e.slice(4,6),16);return`rgba(${i}, ${a}, ${r}, ${t})`},"hexToRgba");var J=p((e,t,i,a,r)=>{e.append("defs").append("marker").attr("id","arrowhead").attr("viewBox","0 0 10 10").attr("refX","5").attr("refY","5").attr("markerWidth","6").attr("markerHeight","6").attr("orient","auto-start-reverse").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("fill","black");let n="16",o=100,l=20,s="16",d=100,c=160;t.title&&e.append("text").attr("x",o).attr("y",l).attr("fill",a.labelColor).attr("font-size",n).attr("dominant-baseline","hanging").attr("text-anchor","middle").attr("class","arrayDiagramTitle").text(t.title);let b=e.append("g").attr("class","component").attr("id",`component_${r}`).attr("transform",`translate(50, ${i+40})`),y=0;if(t.elements.forEach((w,k)=>{ut(b,w,k,a,t.showIndex||!1,y),y+=1}),t.label){let w=c,k=d;b.append("text").attr("x",k).attr("y",w).attr("fill",a.labelColor).attr("font-size",s).attr("dominant-baseline","hanging").attr("text-anchor","middle").attr("class","arrayDiagramLabel").text(t.label)}},"drawArrayDiagram"),ut=p((e,t,i,{labelColor:a,labelFontSize:r},n,o)=>{let l="16",s="16",d=e.append("g");d.attr("class","unit").attr("id",`unit_${o}`);let c=40,m=i*c,b=50,y=h(t.color);if(t.arrow&&t.arrowLabel!=="null"){let w=b-40,k=b-10;d.append("line").attr("x1",m+20).attr("y1",w).attr("x2",m+20).attr("y2",k).attr("stroke","black").attr("stroke-width","1.5").attr("marker-end","url(#arrowhead)"),t.arrowLabel&&t.arrowLabel!=="null"&&d.append("text").attr("x",m+20).attr("y",w-20).attr("fill",a).attr("font-size","16").attr("dominant-baseline","hanging").attr("text-anchor","middle").attr("class","arrowContext").text(t.arrowLabel)}d.append("rect").attr("x",m).attr("y",b).attr("width",c).attr("height",c).style("fill",y).attr("stroke","#000000").attr("stroke-width","2px").attr("class","arrayElement"),d.append("text").attr("x",m+c/2).attr("y",b+c/2).attr("fill",a).attr("font-size",s).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","elementLabel").text(t.value),n&&d.append("text").attr("x",m+c/2).attr("y",b+c+20).attr("fill",a).attr("font-size",l).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","indexLabel").text(i)},"drawElement");var K=p((e,t,i,a,r)=>{let o=t.title?100:0,l=e.append("g");l.attr("transform",`translate(0, ${i})`).attr("class","component").attr("id",`component_${r}`);let s=t.rows.length,d=Math.max(...t.rows.map(c=>c.elements.length));if(t.title&&e.append("text").attr("x",50).attr("y",i).attr("fill",a.labelColor).attr("font-size",a.labelFontSize).attr("dominant-baseline","hanging").attr("text-anchor","start").attr("class","diagramTitle").text(t.title),t.rows.forEach((c,m)=>{c.elements.forEach((b,y)=>{ft(l,b,m,y,a),bt(l,m,y,a)})}),t.label){let c=s*50+50,m=d*25;l.append("text").attr("x",m).attr("y",c).attr("fill",a.labelColor).attr("font-size",a.labelFontSize).attr("dominant-baseline","hanging").attr("text-anchor","middle").attr("class","arrayDiagramLabel").text(t.label)}t.showIndex&&gt(l,s,d,a)},"drawMatrixDiagram"),ft=p((e,t,i,a,{labelColor:r,labelFontSize:n})=>{let o=e.append("g");o.attr("class","unit").attr("id",`unit_(${i},${a})`);let l=a*50,s=i*50,d="#000000",c="1.2px",m=h(t.color);o.append("rect").attr("x",l).attr("y",s).attr("width",50).attr("height",50).style("fill",m).attr("stroke",d).attr("stroke-width",c).attr("class","matrixElement"),o.append("text").attr("x",l+25).attr("y",s+25).attr("fill",r).attr("font-size",n).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","elementLabel").text(t.value.toString()),t.arrow&&t.arrowLabel!=="null"&&(o.append("circle").attr("cx",l+25).attr("cy",s+25).attr("r",23).attr("stroke","red").attr("stroke-width","2").attr("fill","none"),o.append("text").attr("x",l+52).attr("y",s+25).attr("fill","red").attr("font-size",n).attr("dominant-baseline","middle").attr("text-anchor","start").attr("class","arrowLabel").text(t.arrowLabel||""))},"drawElement"),gt=p((e,t,i,{labelColor:a,labelFontSize:r})=>{let n=e.append("g");for(let o=0;o<t;o++)n.append("text").attr("x",-10).attr("y",o*50+25).attr("fill",a).attr("font-size",r).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","rowIndex").text(o.toString());for(let o=0;o<i;o++)n.append("text").attr("x",o*50+25).attr("y",-10).attr("fill",a).attr("font-size",r).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","colIndex").text(o.toString())},"addIndices"),bt=p((e,t,i,{borderColor:a,borderWidth:r})=>{let n=e.append("g"),o=i*50,l=t*50;n.append("rect").attr("x",o).attr("y",l).attr("width",50).attr("height",50).attr("stroke",a).attr("stroke-width",r).attr("fill","none")},"drawGrid");var Q=p((e,t,i,a)=>{e.append("defs").append("marker").attr("id","arrowhead").attr("viewBox","0 0 10 10").attr("refX","5").attr("refY","5").attr("markerWidth","6").attr("markerHeight","6").attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("fill","black");let r=e.append("g");r.attr("transform",`translate(0, ${i})`).attr("class","component").attr("id",`component_${a}`);let n=t.size*40;yt(r,50,0,70,n);let o=0;if(t.elements.forEach((l,s)=>{let d=t.size-t.elements.length+s;xt(r,l,d,o),o+=1}),t.label){let s=n+40+20;r.append("text").attr("x",85).attr("y",s).attr("fill","black").attr("font-size","16").attr("dominant-baseline","hanging").attr("text-anchor","middle").attr("class","stackDiagramLabel").text(t.label)}},"drawStackDiagram"),xt=p((e,t,i,a)=>{let r=e.append("g");r.attr("class","unit").attr("id",`unit_${a}`);let n=50,o=i*40,l=h(t.color);if(r.append("rect").attr("x",n).attr("y",o).attr("width",70).attr("height",40).style("fill",l).attr("stroke","black").attr("stroke-width","1").attr("class","stackElement"),t.arrow&&t.arrowLabel!=="null"){let s=n+80,d=s+40;r.append("line").attr("x1",d).attr("y1",o+20).attr("x2",s).attr("y2",o+20).attr("stroke","black").attr("stroke-width","1.5").attr("marker-end","url(#arrowhead)"),t.arrowLabel&&t.arrowLabel!=="null"&&r.append("text").attr("x",d+10).attr("y",o+20).attr("fill","black").attr("font-size","16").attr("dominant-baseline","middle").attr("text-anchor","start").attr("class","arrowContext").text(t.arrowLabel)}r.append("text").attr("x",n+35).attr("y",o+20).attr("fill","black").attr("font-size","16").attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","elementLabel").text(t.value)},"drawElement"),yt=p((e,t,i,a,r)=>{let n="#000000";e.append("line").attr("x1",t).attr("y1",i).attr("x2",t).attr("y2",i+r).attr("stroke",n).attr("stroke-width",2),e.append("line").attr("x1",t+a).attr("y1",i).attr("x2",t+a).attr("y2",i+r).attr("stroke",n).attr("stroke-width",2),e.append("line").attr("x1",t).attr("y1",i+r).attr("x2",t+a).attr("y2",i+r).attr("stroke",n).attr("stroke-width",2)},"drawFramework");var Z=p((e,t,i,a)=>{let r=e.append("g");r.attr("transform",`translate(0, ${i})`).attr("class","component").attr("id",`component_${a}`),r.append("defs").append("marker").attr("id","arrowhead").attr("viewBox","0 0 10 10").attr("refX","5").attr("refY","5").attr("markerWidth","4").attr("markerHeight","5").attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("fill","black");let n=t.elements.filter(c=>c.type=="node"),o=new Set(n.filter(c=>c.hidden).map(c=>c.nodeId)),l=n.filter(c=>!c.hidden),s=t.elements.filter(c=>c.type=="edge"&&!o.has(c.start)&&!o.has(c.end)),d=ht(n||[]);if(s&&s.forEach(c=>{kt(r,c,d)}),l){let c=0;l.forEach(m=>{wt(r,m,d[m.nodeId],c),c+=1})}if(t.label){let c=l?Math.ceil(l.length/3)*100+70:100;r.append("text").attr("x",150).attr("y",c).attr("fill","black").attr("font-size","16").attr("dominant-baseline","hanging").attr("text-anchor","middle").attr("class","graphDiagramLabel").text(t.label)}},"drawGraphDiagram"),ht=p(e=>{let t={},n=2*Math.PI/e.length;return e.forEach((o,l)=>{let s=l*n;t[o.nodeId]={x:150+100*Math.cos(s),y:150+100*Math.sin(s)}}),t},"calculateNodePositions"),wt=p((e,t,i,a)=>{if(t.hidden)return;let r=i.x,n=i.y,o=h(t.color),l=e.append("g");if(l.attr("class","unit").attr("id",`unit_${a}`),l.append("circle").attr("cx",r).attr("cy",n).attr("r",20).style("fill",o).attr("stroke","black").attr("stroke-width","1").attr("class","graphNode"),l.append("text").attr("x",r).attr("y",n).attr("dy",".35em").attr("fill","black").attr("font-size","16").attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","nodeLabel").text(t.value||t.nodeId),t.arrow&&t.arrowLabel!=="null"){let s=r+45,d=r+25;l.append("line").attr("x1",s).attr("y1",n).attr("x2",d).attr("y2",n).attr("stroke","black").attr("stroke-width","2").attr("marker-end","url(#arrowhead)"),l.append("text").attr("x",s+5).attr("y",n).attr("fill","black").attr("font-size","14").attr("dominant-baseline","middle").attr("text-anchor","start").attr("class","arrowLabel").text(t.arrowLabel||"")}},"drawNode"),kt=p((e,t,i)=>{let a=i[t.start],r=i[t.end];if(a&&r){let{startX:n,startY:o,endX:l,endY:s}=Lt(a,r),d=t.color||"black";e.append("line").attr("x1",n||0).attr("y1",o||0).attr("x2",l||0).attr("y2",s||0).attr("stroke",d).attr("stroke-width","2"),t.value&&e.append("text").attr("x",(n+l)/2).attr("y",(o+s)/2).attr("fill","black").attr("font-size","16").attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","edgeLabel").text(t.value)}},"drawEdge"),Lt=p((e,t)=>{let a=t.x-e.x,r=t.y-e.y,n=Math.sqrt(a*a+r*r),o=a*20/n,l=r*20/n;return{startX:e.x+o,startY:e.y+l,endX:t.x-o,endY:t.y-l}},"calculateEdgePosition");var tt=p((e,t,i,a)=>{let r=e.append("g");r.attr("transform",`translate(0, ${i})`).attr("class","component").attr("id",`component_${a}`),r.append("defs").append("marker").attr("id","arrowhead").attr("viewBox","0 0 10 10").attr("refX","5").attr("refY","5").attr("markerWidth","4").attr("markerHeight","5").attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("fill","black");let n=t.elements||[],o=Ft(n),l=St(n);if(o&&o.forEach(s=>{Dt(r,s,l)}),n){let s=0;n.forEach(d=>{Gt(r,d,l[d.nodeId],s),s+=1})}if(t.label){let s=n?Math.ceil(n.length/3)*100+70:100;r.append("text").attr("x",150).attr("y",s).attr("fill","black").attr("font-size","16").attr("dominant-baseline","hanging").attr("text-anchor","middle").attr("class","treeDiagramLabel").text(t.label)}},"drawTreeDiagram"),St=p(e=>{let t={},a=vt(e),r=a>2?100:70,n=0,o=p((s,d,c)=>{let m=r-c*(r/a),b=d,y=n+c*100;t[s.nodeId]={x:b,y};let w=e.find(G=>G.nodeId===s.left),k=e.find(G=>G.nodeId===s.right);w&&o(w,b-m,c+1),k&&o(k,b+m,c+1)},"calculatePosition"),l=e.find(s=>!s.parentId);return l&&o(l,150,0),t},"calculateNodePositions"),vt=p(e=>{let t=p((a,r)=>{let n=e.find(d=>d.nodeId===a.left),o=e.find(d=>d.nodeId===a.right),l=n?t(n,r+1):r,s=o?t(o,r+1):r;return Math.max(l,s)},"findDepth"),i=e.find(a=>!a.parentId);return i?t(i,0):0},"calculateMaxDepth"),Ft=p(e=>{let t=[];return e.forEach(i=>{i.left&&t.push({start:i.nodeId,end:i.left}),i.right&&t.push({start:i.nodeId,end:i.right})}),t},"calculateTreeEdges"),Gt=p((e,t,i,a)=>{let r=i.x,n=i.y,o=h(t.color),l=e.append("g");if(l.attr("class","unit").attr("id",`unit_${a}`),l.append("circle").attr("cx",r).attr("cy",n).attr("r",20).style("fill",o).attr("stroke","black").attr("stroke-width","1").attr("class","treeNode"),l.append("text").attr("x",r).attr("y",n).attr("dy",".35em").attr("fill","black").attr("font-size","16").attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","nodeLabel").text(t.value||t.nodeId),t.arrow&&t.arrowLabel!=="null"){let s=r+45,d=r+25;l.append("line").attr("x1",s).attr("y1",n).attr("x2",d).attr("y2",n).attr("stroke","black").attr("stroke-width","2").attr("marker-end","url(#arrowhead)"),l.append("text").attr("x",s+5).attr("y",n).attr("fill","black").attr("font-size","16").attr("dominant-baseline","middle").attr("text-anchor","start").attr("class","arrowLabel").text(t.arrowLabel)}},"drawNode"),Dt=p((e,t,i)=>{let a=i[t.start],r=i[t.end];if(a&&r){let{startX:n,startY:o,endX:l,endY:s}=Et(a,r),d=t.color||"black";e.append("line").attr("x1",n).attr("y1",o).attr("x2",l).attr("y2",s).attr("stroke",d).attr("stroke-width","2"),t.value&&e.append("text").attr("x",(n+l)/2).attr("y",(o+s)/2).attr("fill","black").attr("font-size","16").attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","edgeLabel").text(t.value)}},"drawEdge"),Et=p((e,t)=>{let a=t.x-e.x,r=t.y-e.y,n=Math.sqrt(a*a+r*r),o=a*20/n,l=r*20/n;return{startX:e.x+o,startY:e.y+l,endX:t.x-o,endY:t.y-l}},"calculateEdgePosition");var rt=p((e,t,i,a)=>{let r=e.append("g");r.attr("transform",`translate(0, ${i})`).attr("class","component").attr("id",`component_${a}`),r.append("defs").append("marker").attr("id","arrowhead_node").attr("viewBox","0 0 10 10").attr("refX","5").attr("refY","5").attr("markerWidth","5").attr("markerHeight","6").attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("fill","black"),r.append("defs").append("marker").attr("id","arrowhead").attr("viewBox","0 0 10 10").attr("refX","5").attr("refY","5").attr("markerWidth","3").attr("markerHeight","5").attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("fill","black");let n=t.elements,o=Ct(n||[]),l=0;n&&n.forEach((s,d)=>{Pt(r,s,o[d],d<n.length-1,l),l+=1}),t.label&&r.append("text").attr("x",150).attr("y",100).attr("fill","black").attr("font-size","18").attr("dominant-baseline","hanging").attr("text-anchor","middle").attr("class","linkedListDiagramLabel").text(t.label)},"drawLinkedListDiagram"),Ct=p(e=>{let t=[];return e.forEach((n,o)=>{t.push({x:50+o*120,y:50})}),t},"calculateNodePositions"),Pt=p((e,t,i,a,r)=>{let n=i.x,o=i.y,l=h(t.color),s=e.append("g");if(s.attr("class","unit").attr("id",`unit_${r}`),s.append("rect").attr("x",n).attr("y",o).attr("width",60).attr("height",30).style("fill",l).attr("stroke","black").attr("stroke-width","1").attr("class","linkedListNode"),s.append("text").attr("x",n+30).attr("y",o+15).attr("dy",".35em").attr("fill","black").attr("font-size","18").attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","nodeLabel").text(t.value),t.arrow&&t.arrowLabel!=="null"){let d=o-30,c=o-10;s.append("line").attr("x1",n+30).attr("y1",d).attr("x2",n+30).attr("y2",c).attr("stroke","black").attr("stroke-width","2").attr("marker-end","url(#arrowhead)"),s.append("text").attr("x",n+30).attr("y",d-10).attr("fill","black").attr("font-size","16").attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","arrowLabel").text(t.arrowLabel||"")}a&&s.append("line").attr("x1",n+60).attr("y1",o+15).attr("x2",n+60+55).attr("y2",o+15).attr("stroke","black").attr("stroke-width","2").attr("marker-end","url(#arrowhead_node)")},"drawNode");var at=p((e,t,i,a)=>{let r=e.append("g");r.attr("transform",`translate(0, ${i})`).attr("class","component").attr("id",`component_${a}`);let n=0,o=0;if(t.elements.forEach(l=>{n=Vt(r,l,n,o),o+=1}),t.label){let l=n+20;r.append("text").attr("x",50).attr("y",l).attr("fill","black").attr("font-size","16").attr("dominant-baseline","hanging").attr("text-anchor","middle").attr("class","textDiagramLabel").text(t.label)}},"drawTextDiagram"),Vt=p((e,t,i,a)=>{let r=e.append("g").attr("class","unit").attr("id",`unit_${a}`),n=50,o=t.split(`
`);return o.forEach((l,s)=>{let d=i+s*20;r.append("text").attr("x",n).attr("y",d).attr("fill","black").attr("font-size","20").attr("dominant-baseline","hanging").attr("class","textElement").text(l)}),i+o.length*20},"drawElement");var It=p((e,t,i,a)=>{let r=a.db,n=r.getConfig(),o=r.getPages(),l=r.getDiagramTitle(),s=800,d=1e3,c=W(t),m=0,b=null,y=p(L=>{c.selectAll("g.page").attr("display","none"),c.select(`#page${L}`).attr("display","inline"),c.select("#prevButton").attr("fill",L>0?"#007bff":"#c0c0c0"),c.select("#nextButton").attr("fill",L<o.length-1?"#007bff":"#c0c0c0"),c.select("#pageIndicator").text(`${L+1} / ${o.length}`)},"renderPage"),w=p((L,v)=>{let S=L.append("g").attr("class","navigation-buttons"),f=40,u=20,g=10,x=d/2-(f*1.5+g),F=s-60,P=S.append("g").attr("id","prevButtonGroup").attr("cursor","pointer");P.append("rect").attr("id","prevButton").attr("x",x).attr("y",F).attr("width",f).attr("height",u).attr("fill","#c0c0c0"),P.append("text").text("<").attr("x",x+f/2).attr("y",F+u/2).attr("fill","white").attr("text-anchor","middle").attr("alignment-baseline","middle");let V=S.append("g").attr("id","playButtonGroup").attr("cursor","pointer");V.append("rect").attr("id","playButton").attr("x",x+f+g).attr("y",F).attr("width",f).attr("height",u).attr("fill","#007bff"),V.append("text").text("\u25B6").attr("x",x+f+g+f/2).attr("y",F+u/2).attr("fill","white").attr("text-anchor","middle").attr("alignment-baseline","middle");let I=S.append("g").attr("id","nextButtonGroup").attr("cursor","pointer");I.append("rect").attr("id","nextButton").attr("x",x+2*(f+g)).attr("y",F).attr("width",f).attr("height",u).attr("fill","#007bff"),I.append("text").text(">").attr("x",x+2*(f+g)+f/2).attr("y",F+u/2).attr("fill","white").attr("text-anchor","middle").attr("alignment-baseline","middle"),S.append("text").attr("id","pageIndicator").attr("x",d-50).attr("y",s-50).attr("fill","black").attr("text-anchor","middle").attr("alignment-baseline","middle").text(`1 / ${v}`),P.node()?.addEventListener("click",()=>{m>0&&(m-=1,y(m))}),I.node()?.addEventListener("click",()=>{m<v-1&&(m+=1,y(m))}),V.node()?.addEventListener("click",()=>{b?(clearInterval(b),b=null,D("#playButton text").text("\u25B6"),D("#playButton").attr("fill","#007bff")):(b=1e3,D("#playButton text").text("\u275A\u275A"),D("#playButton").attr("fill","#c0c0c0"))})},"addNavigationButtons"),k=p((L,v,S)=>{let f=L.append("g").attr("id",`page${S}`).attr("class","page").attr("display",S===0?"inline":"none");l&&f.append("text").text(l).attr("x",d/2).attr("y",25).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","pageTitle");let u=50,g=0;for(let x of v.subDiagrams)switch(x.type){case"array":{J(f,x,u,n,g),g+=1,u+=250;break}case"matrix":{K(f,x,u,n,g),g+=1,u+=250;break}case"stack":{Q(f,x,u,g),g+=1,u+=250;break}case"graph":{Z(f,x,u,g),g+=1,u+=250;break}case"tree":{tt(f,x,u,g),g+=1,u+=250;break}case"linkedList":{rt(f,x,u,g),g+=1,u+=250;break}case"text":{at(f,x,u,g),g+=1,u+=250;break}default:throw new Error(`Unknown diagram type: ${x.type}`)}},"drawPage");c.attr("viewBox",`0 0 ${d} ${s}`),Y(c,s,d,n.useMaxWidth),o.forEach((L,v)=>{k(c,L,v)}),w(c,o.length),y(m);let G=`
    (function() {
      const svg = document.getElementById('${t}');
      let currentPage = 0;
      const totalPages = ${o.length};
      let playInterval = null;

      function renderPage(pageIndex) {
        const pages = svg.querySelectorAll('g.page');
        pages.forEach(page => {
          page.style.display = 'none';
        });
        svg.querySelector('#page' + pageIndex).style.display = 'inline';

        const prevButton = svg.querySelector('#prevButton');
        const nextButton = svg.querySelector('#nextButton');
        
        if (prevButton) prevButton.setAttribute('fill', pageIndex > 0 ? '#007bff' : '#c0c0c0');
        if (nextButton) nextButton.setAttribute('fill', pageIndex < totalPages - 1 ? '#007bff' : '#c0c0c0');

        // Update current page display
        svg.querySelector('#pageIndicator').textContent = (pageIndex + 1) + ' / ' + totalPages;

        // Notify React about the page change
        window.currentPage = currentPage;
        const event = new Event('pageChange');
        window.dispatchEvent(event);
      }

      svg.querySelector('#prevButtonGroup').addEventListener('click', function() {
        if (currentPage > 0) {
          currentPage -= 1;
          renderPage(currentPage);
        }
      });

      svg.querySelector('#nextButtonGroup').addEventListener('click', function() {
        if (currentPage < totalPages - 1) {
          currentPage += 1;
          renderPage(currentPage);
        }
      });

      svg.querySelector('#playButtonGroup').addEventListener('click', function() {
        if (playInterval) {
          clearInterval(playInterval);
          playInterval = null;
          svg.querySelector('#playButton text').textContent = '\u25B6';
          svg.querySelector('#playButton').setAttribute('fill', '#007bff');
        } else {
          playInterval = setInterval(() => {
            if (currentPage < totalPages - 1) {
              currentPage += 1;
            } else {
              currentPage = 0;
            }
            renderPage(currentPage);
          }, 1000);
          svg.querySelector('#playButton text').textContent = '\u275A\u275A';
          svg.querySelector('#playButton').setAttribute('fill', '#c0c0c0');
        }
      });

      renderPage(currentPage);
    })();
  `;c.append("script").attr("type","text/javascript").text(G)},"draw"),et={draw:It};var nt=p((e={})=>(C.debug({options:e}),`
    .element {
      font-size: ${e.array?.elementFontSize??"10px"};
      fill: ${e.array?.valueColor??"black"};
    }
    .element.index {
      fill: ${e.array?.indexColor??"black"};
    }
    .element {
      stroke: ${e.array?.elementStrokeColor??"black"};
      stroke-width: ${e.array?.elementStrokeWidth??"1"};
      fill: ${e.array?.elementFillColor??"#efefef"};
    }
  `),"styles");var Ir={parser:U,db:E,renderer:et,styles:nt};export{Ir as diagram};
